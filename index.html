<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HTML5 Assignment</title>
	<!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
	<script src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.touchSwipe.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <style>
    	#mainimage
    	{
   			background-image: url('baby1.jpg');
			background-size: 100% 100%;
			background-repeat: no-repeat;
			width: 100%;
			margin:0 auto;
		}
		.topmenu
   		{
   			width:15%; 
   			text-align:center;
   			color:black;
   			cursor:pointer;
   			height:50px;
   		}
   		.topmenu:hover
   		{
	   		width:15%; 
	   		text-align:center;
	   		color:#428bca;
	   		background-color:#EEEEEE;
	   		cursor:pointer;
	   		height:50px;
	   	}
   		#topmenudiv table td 
   		{
   			border:1.5px solid black;
   		}
   		#bottommenu td
   		{
   			border-right:1.5px solid black;
   		}
   		.topmenumiddle
   		{
	   		width:70%; 
	   		text-align:center;
	   		color:black;
	   		cursor:pointer;
	   		height:50px;
	   	}
   		.topmenumiddle:hover{
	   		width:70%; 
	   		text-align:center;
	   		color:#428bca;
	   		cursor:pointer;
	   		background-color:#eee;
	   	}
   	
   		.bottomnav{
	   		width:33%; 
	   		text-align:center;
	   		color:black;
	   		cursor:pointer;
   		}
   	
   		.bottomnav:hover{
   			background-color:#eee;
   			color: #428bca;
   		}
   		
   		.bottommenudiv{
   			background-color: #85898E;
   			opacity: 0.6;
			height:50px;
   		}
   	</style>
	<script>
		var previous_distance = 0; 
		var previous_distance_down = 0;
		var height = 0;
		
			$(document).ready(function()
			{
  				height = window.innerHeight; //get height of the browser window.
				$('#mainimage').height(height-100+'px'); //To leave some space below the page 
			  	$('#mainBody').height(height+'px');
			  	$('.bottommenudiv').css('margin-top',height-200+'px');// Place div to the bottom of the page
			});
		
			//code to get direction and distance of finger swipe
			$(function() {	
					$("#mainBody").swipe( {
						swipe:function(event, direction, distance, duration, fingerCount, fingerData)
						{
							if(direction == 'up')
							{
								var half_distance = 0;
								//To move image half of the finger swipe
								half_distance = distance/2;
								previous_distance = parseInt(previous_distance);//Store previous image moved value, it will help to move image next time
								if(previous_distance != null)
								{
									half_distance = half_distance + previous_distance;	
								}
								previous_distance = half_distance;
								if((previous_distance+200) >= height) //restrict moving of image after reaches to some height
								{
									$("#bottommenu").css('margin-top','-'+(height-200)+'px');
									$("#mainimage").css('background-position',"0px -"+(height-200)+'px');									
									$(".bottommenudiv").css('opacity','1');
									$("#topmenudiv").css('opacity','0.7');
									$("#topmenudiv").css('background-color','#85898E');
									$('#topmenudiv table td').css('border','none'); 
									$('#bottommenu td').css('border','none');
									
								}
								else
								{
									$("#mainimage").css('background-position',"0px -"+half_distance+'px');
									$("#bottommenu").css('margin-top','-'+half_distance+'px');
									
									/******************code to set opacity according to movements************/
									
									var cal_opacity_up = $(".bottommenudiv").position().top;
									cal_opacity_up = -1 * cal_opacity;
									var cal_opacity_down = 0.7 + height/cal_opacity_up/10;
									if(cal_opacity_down > 1)
									{
										cal_opacity_down = 0.8;
									}
									cal_opacity_up = 0.7 - height/cal_opacity_up/10;
									if(cal_opacity_up < 0.1 || cal_opacity_up > 0.7)
									{
										cal_opacity_up = 0.2;
									}
									
									$("#topmenudiv").css('opacity',cal_opacity_up);
									$("#topmenudiv").css('background-color','#85898E');
									$('.bottommenudiv').css('opacity',cal_opacity_down);
									
								} 
							}
							else if(direction == 'down')
							{
								var half_distance = 0;
								half_distance = distance/2;
								previous_distance = parseInt(previous_distance);
								if(previous_distance != null && previous_distance!=0)
								{
									$('#topmenudiv').css("opacity",'1');
									$("#topmenudiv").css('background-color','transparent');
									$('.bottommenudiv').css('opacity','0.6');
									if(previous_distance > half_distance)
									{
										half_distance = previous_distance - half_distance;
										previous_distance = half_distance;
										$("#bottommenu").css('margin-top','-'+half_distance+'px');
										$("#mainimage").css('background-position',"0px -"+half_distance+'px');
										$('#topmenudiv table td').css('border','1.5px solid black'); 
										$('#bottommenu td').css('border','1.5px solid black');
										
										/******************code to set opacity according to movements************/
										
										var cal_opacity_up = $(".bottommenudiv").position().top;
										cal_opacity_up = -1 * cal_opacity_up;
										var cal_opacity_down = 1 - height/cal_opacity_up/10;
										cal_opacity_up = 0.7 - height/cal_opacity_up/10;
										if(cal_opacity_up < 0.1 || cal_opacity_up > 0.7)
										{
											cal_opacity_up = 0.1;
										}
										if(cal_opacity_down < 0.7 )
										{
											cal_opacity_down = 0.7;
										}
										//alert(temp1);
										$("#topmenudiv").css('opacity',cal_opacity_up);
										$("#topmenudiv").css('background-color','#85898E');
										$('.bottommenudiv').css('opacity',cal_opacity_down);
									}
									else
									{
										$("#bottommenu").css('margin-top','0px');
										$("#mainimage").css('background-position',"0px 0px");
										previous_distance = 0;
									}
								}
							}
						 },
					   	 threshold:0
					});
			});
		</script>
  	</head>
  	<body id="mainBody">
		<div class="container">  
  			<div  id="mainimage">
  				<div id="topmenudiv">
  					<table style="width:100%;border:1px solid black;">
      					<tr>
			      			<td class="topmenu" ><span class="glyphicon glyphicon-signal"></span> Star</td>
			      			<td class="topmenumiddle"><span class="glyphicon glyphicon-th-list"></span> Start</td>
			      			<td class="topmenu"><span class="glyphicon glyphicon-search"></span> Search</td>
      					</tr>
			      	</table>  
  				</div>
			  	<div class="bottommenudiv"> 
			 		<table style="width:100%; height:100%;" id="bottommenu">
			      		<tr>
			      			<td class="bottomnav" ><span class="glyphicon glyphicon-envelope"></span> Message</td>
    			  			<td class="bottomnav"><span class="glyphicon glyphicon-home"></span> Home</td>
      						<td class="bottomnav"><span class="glyphicon glyphicon-camera"></span> Camera</td>
      					</tr>
      				</table>  
 				</div>
		 	</div>
 		</div>        
	</body>
</html>